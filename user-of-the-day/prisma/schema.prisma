generator client {
  provider        = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./db.sql"
}

model User {
  id            Int             @id
  usedChats     Chat[]          @relation("CurrentUser")
  losedChats    Chat[]          @relation("CurrentLoser")
  UserChatStats UserChatStats[]
}

model Chat {
  id             Int             @id
  currentUserId  Int
  currentLoserId Int
  lastDrawDate   DateTime
  currentUser    User            @relation("CurrentUser", fields: [currentUserId], references: [id])
  currentLoser   User            @relation("CurrentLoser", fields: [currentLoserId], references: [id])
  UserChatStats  UserChatStats[]
}

model UserChatStats {
  user       User @relation(fields: [userId], references: [id])
  userId     Int
  chat       Chat @relation(fields: [chatId], references: [id])
  chatId     Int
  userCount  Int
  loserCount Int

  @@id([userId, chatId])
}
